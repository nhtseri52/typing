<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Typing Test</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#0f172a;
    color:#e5e7eb;
    text-align:center;
    margin:0;
}
.container{
    max-width:800px;
    margin:40px auto;
    background:#020617;
    padding:30px;
    border-radius:12px;
}
.text-box{
    background:#020617;
    border:1px solid #334155;
    padding:15px;
    font-size:18px;
    text-align:left;
    border-radius:8px;
    margin-bottom:15px;
    line-height:1.6;
}
.correct{ color:#22c55e; }
.wrong{ color:#ef4444; text-decoration:underline; }

textarea{
    width:100%;
    height:140px;
    font-size:18px;
    padding:12px;
    border-radius:8px;
    border:none;
}

select, button{
    padding:10px;
    font-size:16px;
    margin:5px;
    border-radius:6px;
    border:none;
}
button{
    background:#2563eb;
    color:white;
    cursor:pointer;
}

.stats{
    margin-top:15px;
    display:flex;
    justify-content:space-around;
    font-size:18px;
}
</style>
</head>

<body>
<div class="container">
    <h1>Typing Speed Test</h1>

    <select id="timeSelect">
        <option value="30">30 gi√¢y</option>
        <option value="60">1 ph√∫t</option>
        <option value="120">2 ph√∫t</option>
        <option value="300">5 ph√∫t</option>
        <option value="600">10 ph√∫t</option>
    </select>

    <button onclick="startTest()">B·∫Øt ƒë·∫ßu</button>

    <div id="text" class="text-box"></div>

    <textarea id="input" placeholder="G√µ theo ƒëo·∫°n vƒÉn ·ªü tr√™n..." disabled></textarea>

    <div class="stats">
        <div>‚è± <span id="time">0</span>s</div>
        <div>‚ö° <span id="wpm">0</span> WPM</div>
        <div>üéØ <span id="acc">100</span>%</div>
    </div>
</div>

<script>
const texts = [
 "G√µ ph√≠m nhanh l√† k·ªπ nƒÉng quan tr·ªçng gi√∫p b·∫°n h·ªçc t·∫≠p v√† l√†m vi·ªác hi·ªáu qu·∫£ h∆°n m·ªói ng√†y.",
 "Luy·ªán t·∫≠p ƒë·ªÅu ƒë·∫∑n s·∫Ω gi√∫p c·∫£i thi·ªán t·ªëc ƒë·ªô g√µ v√† ƒë·ªô ch√≠nh x√°c m·ªôt c√°ch r√µ r·ªát.",
 "L·∫≠p tr√¨nh vi√™n th∆∞·ªùng c·∫ßn t·ªëc ƒë·ªô g√µ t·ªët ƒë·ªÉ l√†m vi·ªác nhanh v√† √≠t sai s√≥t."
];

let currentText = "";
let timeLeft, timer, started = false;

const textDiv = document.getElementById("text");
const input = document.getElementById("input");

function startTest(){
    clearInterval(timer);
    input.value = "";
    input.disabled = false;
    input.focus();
    started = true;

    currentText = texts[Math.floor(Math.random()*texts.length)];
    renderText("");

    timeLeft = parseInt(document.getElementById("timeSelect").value);
    document.getElementById("time").innerText = timeLeft;

    timer = setInterval(()=>{
        timeLeft--;
        document.getElementById("time").innerText = timeLeft;
        if(timeLeft <= 0) endTest();
    },1000);
}

function renderText(value){
    let html = "";
    let errors = 0;

    for(let i=0;i<currentText.length;i++){
        if(value[i] == null){
            html += currentText[i];
        }else if(value[i] === currentText[i]){
            html += `<span class="correct">${currentText[i]}</span>`;
        }else{
            html += `<span class="wrong">${currentText[i]}</span>`;
            errors++;
        }
    }

    textDiv.innerHTML = html;

    let charsTyped = value.length;
    let timeUsed = (parseInt(document.getElementById("timeSelect").value) - timeLeft) / 60;
    let wpm = timeUsed > 0 ? Math.round((charsTyped / 5) / timeUsed) : 0;
    let acc = charsTyped > 0 ? Math.round(((charsTyped - errors) / charsTyped) * 100) : 100;

    document.getElementById("wpm").innerText = wpm;
    document.getElementById("acc").innerText = acc;
}

input.addEventListener("input", ()=>{
    if(!started) return;
    renderText(input.value);
});

function endTest(){
    clearInterval(timer);
    started = false;
    input.disabled = true;
}
</script>

</body>
</html>
